/*!
* jQuery appendGrid v1.3.5
* https://appendgrid.apphb.com/
*
* Copyright 2014 Albert L.
* Dual licensed under the LGPL (http://www.gnu.org/licenses/lgpl.html)
* and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
*
* Depends:
* jQuery v1.9.1+
* jquery UI v1.10.2+
*/
(function(f){var q={caption:null,initRows:3,initData:null,columns:null,i18n:null,idPrefix:null,rowDragging:false,hideButtons:null,hideRowNumColumn:false,rowButtonsInFront:false,buttonClasses:null,customGridButtons:null,customRowButtons:null,customFooterButtons:null,dataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null};var v={type:"text",name:null,value:null,display:null,displayCss:null,headerSpan:1,cellCss:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,uiOption:null,uiTooltip:null,customBuilder:null,customGetter:null,customSetter:null,onClick:null,onChange:null};var r={noColumnInfo:"Cannot initial grid without column information!",elemNotTable:"Cannot initial grid on element other than TABLE!",notInit:"`appendGrid` does not initialized",getValueMultiGrid:"Cannot get values on multiple grid",notSupportMethod:"Method is not supported by `appendGrid`: "};var t={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowDrag:"Sort Row",rowEmpty:"This Grid Is Empty"};var k={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,rowDrag:null};var e={append:false,removeLast:false,insert:false,remove:false,moveUp:false,moveDown:false};var j={init:function(Q){var L=this;var J,A,O,C,F,B;var I,P;if(L.length>0){if(!f.isArray(Q.columns)||Q.columns.length==0){alert(r.noColumnInfo);return L}J=L[0];if(m(J.tagName)||J.tagName!="TABLE"){alert(r.elemNotTable);return L}var E=f.extend({},q,Q);f.extend(E,{_uniqueIndex:0,_rowOrder:[],_isDataLoaded:false,_visibleCount:0,_finalColSpan:0,_hideLastColumn:false});if(f.isPlainObject(Q.i18n)){E._i18n=f.extend({},t,Q.i18n)}else{E._i18n=f.extend({},t)}if(f.isPlainObject(Q.buttonClasses)){E._buttonClasses=f.extend({},k,Q.buttonClasses)}else{E._buttonClasses=f.extend({},k)}if(f.isPlainObject(Q.hideButtons)){E.hideButtons=f.extend({},e,Q.hideButtons)}else{E.hideButtons=f.extend({},e)}if(m(E.idPrefix)){if(m(J.id)||J.id==""){E.idPrefix="ag"+new Date().getTime()}else{E.idPrefix=J.id}}if(!f.isPlainObject(E.customGridButtons)){E.customGridButtons={}}A=document.createElement("thead");A.className="ui-widget-header";O=document.createElement("tbody");O.className="ui-widget-content";C=document.createElement("tfoot");C.className="ui-widget-header";f(J).empty().addClass("appendGrid ui-widget").append(A,O,C);F=A.insertRow(-1);if(!E.hideRowNumColumn){I=F.insertCell(-1);I.className="ui-widget-header"}var K=0;for(var M=0;M<E.columns.length;M++){var H=f.extend({},v,E.columns[M]);E.columns[M]=H;if(E.columns[M].type!="hidden"){E._visibleCount++;if(K==0){B=F.insertCell(-1);B.className="ui-widget-header";f(B).text(E.columns[M].display);if(E.columns[M].displayCss){f(B).css(E.columns[M].displayCss)}if(E.columns[M].headerSpan>1){f(B).attr("colSpan",E.columns[M].headerSpan);K=E.columns[M].headerSpan-1}}else{K--}}}if(E.hideButtons.insert&&E.hideButtons.remove&&E.hideButtons.moveUp&&E.hideButtons.moveDown&&(!f.isArray(E.customRowButtons)||E.customRowButtons.length==0)){E._hideLastColumn=true}E._finalColSpan=E._visibleCount;if(!E.hideRowNumColumn){E._finalColSpan++}if(!E._hideLastColumn){E._finalColSpan++}if(!E._hideLastColumn){if(E.rowButtonsInFront){if(E.hideRowNumColumn){P=F.insertCell(0)}else{I.colSpan=2;P=I}}else{P=F.insertCell(-1)}P.className="ui-widget-header"}if(E.caption){F=A.insertRow(0);B=F.insertCell(-1);B.className="ui-state-active caption";B.colSpan=E._finalColSpan;f(B).text(E.caption)}F=C.insertRow(-1);B=F.insertCell(-1);B.colSpan=E._finalColSpan;f("<input/>").attr({type:"hidden",id:E.idPrefix+"_rowOrder",name:E.idPrefix+"_rowOrder"}).appendTo(B);if(E.hideButtons.append&&E.hideButtons.removeLast&&(!f.isArray(E.customFooterButtons)||E.customFooterButtons.length==0)){F.style.display="none"}else{if(!E.hideButtons.append){l(E.customGridButtons.append,"ui-icon-plusthick").attr({title:E._i18n.append}).addClass("append",E._buttonClasses.append).click(function(R){d(J,1,null,null);if(R&&R.preventDefault){R.preventDefault()}return false}).appendTo(B)}if(!E.hideButtons.removeLast){l(E.customGridButtons.removeLast,"ui-icon-closethick").attr({title:E._i18n.removeLast}).addClass("removeLast",E._buttonClasses.removeLast).click(function(R){i(J,null,this.value,false);if(R&&R.preventDefault){R.preventDefault()}return false}).appendTo(B)}if(E.customFooterButtons&&E.customFooterButtons.length){for(var N=E.customFooterButtons.length-1;N>=0;N--){var D=E.customFooterButtons[N];if(D&&D.uiButton&&D.click&&D.atTheFront){f(B).prepend(p(J,D))}}for(var N=0;N<E.customFooterButtons.length;N++){var D=E.customFooterButtons[N];if(D&&D.uiButton&&D.click&&!D.atTheFront){f(B).append(p(J,D))}}}}if(E.rowDragging){f(O).sortable({axis:"y",containment:J,handle:".rowDrag",helper:function(T,S){var U=S.children();var R=S.clone();R.children().each(function(W){f(this).width(U.eq(W).width());var V=f("select",this);if(V.length>0){for(var Y=0;Y<V.length;Y++){var X=U.eq(W).find("select");if(X.length>Y){V[Y].value=X[Y].value}}}});return R},update:function(T,U){var R=U.item[0].id.substring(U.item[0].id.lastIndexOf("_")+1);var S=U.item[0].rowIndex-f("tr",A).length;o(J,U.originalPosition.top>U.position.top,R,S)}})}f(J).data("appendGrid",E);if(f.isArray(Q.initData)){a(J,Q.initData,true)}else{f(J).appendGrid("appendRow",E.initRows)}if(E._rowOrder.length==0){var G=f("<td></td>").text(E._i18n.rowEmpty).attr("colspan",E._finalColSpan);f("tbody",J).append(f("<tr></tr>").addClass("empty").append(G))}}return L},isReady:function(){var C=this,A=false;if(C.length>0){var B=C.first().data("appendGrid");if(B){A=true}}return A},isDataLoaded:function(){var C=this,A=null;if(this.length==1){var B=C.data("appendGrid");if(B){return B._isDataLoaded}else{return false}}else{return false}},load:function(A){var B=this;if(B.length>0){if(A!=null&&A.length>0){a(B[0],A,false)}else{x(B[0])}}return B},appendRow:function(A){return this.appendGrid("insertRow",A)},insertRow:function(D,H,B){var G=this;if(G.length>0){var A=G[0],F=null;var E=f(A).data("appendGrid");if(!E){alert(r.notInit)}else{if((f.isArray(D)&&D.length>0)||(f.isNumeric(D)&&D>0)){F=d(A,D,H,B);if(f.isNumeric(H)||f.isNumeric(B)){s(A,F.rowIndex);var C=E._rowOrder[F.addedRows[0]];f("#"+E.idPrefix+"_Insert_"+C,A).focus()}}}}return G},removeRow:function(E,A){var D=this;if(D.length>0){var B=D[0];var C=f(B).data("appendGrid");if(!C){alert(r.notInit)}else{if(C._rowOrder.length>0){i(B,E,A,true)}}}return D},emptyGrid:function(){var C=this;if(C.length>0){var A=C[0];var B=f(A).data("appendGrid");if(!B){alert(r.notInit)}else{x(A)}}return C},moveUpRow:function(G,F){var E=this,H=-1;if(E.length>0){var D=E[0],K,J,A,C;var B=f(D).data("appendGrid");if(!B){alert(r.notInit)}else{var I=null;K=D.getElementsByTagName("tbody")[0];if(f.isNumeric(G)&&G>0&&G<B._rowOrder.length){I=G;F=B._rowOrder[G];J=document.getElementById(B.idPrefix+"_Row_"+F,D)}else{if(f.isNumeric(F)){I=g(F,B);J=document.getElementById(B.idPrefix+"_Row_"+F,D)}}if(I!=null&&I>0){A=document.getElementById(B.idPrefix+"_Row_"+B._rowOrder[I-1],D);K.removeChild(J);K.insertBefore(J,A);B._rowOrder[I]=B._rowOrder[I-1];B._rowOrder[I-1]=F;C=f("td.first",A).html();f("td.first",A).html(f("td.first",J).html());f("td.first",J).html(C);b(D,B);f("td.last button.moveUp",J).removeClass("ui-state-hover").blur();f("td.last button.moveUp",A).focus();if(B.afterRowSwapped){B.afterRowSwapped(D,I,I-1)}}}}return E},moveDownRow:function(G,F){var E=this,H=-1;if(E.length>0){var D=E[0],K,J,A,C;var B=f(D).data("appendGrid");if(!B){alert(r.notInit)}else{var I=null;K=D.getElementsByTagName("tbody")[0];if(f.isNumeric(G)&&G>=0&&G<B._rowOrder.length-1){I=G;F=B._rowOrder[G];J=document.getElementById(B.idPrefix+"_Row_"+F,D)}else{if(f.isNumeric(F)){I=g(F,B);J=document.getElementById(B.idPrefix+"_Row_"+F,D)}}if(I!=null&&I!=B._rowOrder.length-1){A=document.getElementById(B.idPrefix+"_Row_"+B._rowOrder[I+1],D);K.removeChild(A);K.insertBefore(A,J);B._rowOrder[I]=B._rowOrder[I+1];B._rowOrder[I+1]=F;C=f("td.first",A).html();f("td.first",A).html(f("td.first",J).html());f("td.first",J).html(C);b(D,B);f("td.last button.moveDown",J).removeClass("ui-state-hover").blur();f("td.last button.moveDown",A).focus();if(B.afterRowSwapped){B.afterRowSwapped(D,I,I+1)}}}}return E},getRowCount:function(){var B=this;if(B.length>0){var A=B.data("appendGrid");if(A){return A._rowOrder.length}else{alert(r.notInit)}}else{alert(r.getValueMultiGrid)}return null},getUniqueIndex:function(C){var B=this;if(B.length>0&&C>=0){var A=B.data("appendGrid");if(A){if(C<A._rowOrder.length){return A._rowOrder[C]}}else{alert(r.notInit)}}return null},getRowIndex:function(A){var C=this;if(C.length>0){var B=C.data("appendGrid");if(B){for(var D=0;D<B._rowOrder.length;D++){if(B._rowOrder[D]==A){return D}}return null}else{alert(r.notInit)}}return null},getRowValue:function(F,B,E){var D=this,A=null;if(D.length>0){var C=D.data("appendGrid");if(C){if(f.isNumeric(F)&&F>=0&&F<C._rowOrder.length){B=C._rowOrder[F]}if(!m(B)){A=h(C,B,E)}}else{alert(r.notInit)}}return A},getAllValue:function(D){var E=this,A=null,B;if(E.length>0){var C=f(E).data("appendGrid");if(C){A=D?{}:[];for(var F=0;F<C._rowOrder.length;F++){if(D){B=h(C,C._rowOrder[F],F);f.extend(A,B)}else{B=h(C,C._rowOrder[F]);A.push(B)}}if(D){A._RowCount=C._rowOrder.length}}}return A},getCtrlValue:function(A,D){var B=this;if(B.length>0){settings=B.data("appendGrid");if(settings&&D>=0&&D<settings._rowOrder.length){for(var C=0;C<settings.columns.length;C++){if(settings.columns[C].name===A){return c(settings,C,settings._rowOrder[D])}}}}return null},setCtrlValue:function(B,G,D){var E=this;if(E.length>0){var A=this,C=f(this).data("appendGrid");if(C&&G>=0&&G<C._rowOrder.length){for(var F=0;F<C.columns.length;F++){if(C.columns[F].name==B){n(C,F,C._rowOrder[G],D);break}}}}return E},getCellCtrl:function(C,B){var D=this,A=null;if(D.length==1){settings=D.data("appendGrid");if(!settings){alert(r.notInit)}else{for(var E=0;E<settings.columns.length;E++){if(settings.columns[E].name===C){return u(settings.columns[E].type,settings.idPrefix,C,B);break}}}}return null},getCellCtrlByRowIndex:function(C,F){var D=this,A=null;if(D.length==1){settings=D.data("appendGrid");if(!settings){alert(r.notInit)}else{if(F>=0&&F<settings._rowOrder.length){var B=settings._rowOrder[F];for(var E=0;E<settings.columns.length;E++){if(settings.columns[E].name===C){return u(settings.columns[E].type,settings.idPrefix,C,B)}}}}}return null},setCellCtrlByRowIndex:function(C,G,D){var E=this,A=null;if(E.length==1){settings=E.data("appendGrid");if(!settings){alert(r.notInit)}else{if(G>=0&&G<settings._rowOrder.length){var B=settings._rowOrder[G];for(var F=0;F<settings.columns.length;F++){if(settings.columns[F].name===C){return setCellCtrl(settings.columns[F].type,settings.idPrefix,C,B,D)}}}}}return null},getRowOrder:function(){var C=this,A=null;if(this.length==1){var B=C.data("appendGrid");if(B){A=B._rowOrder.slice()}else{alert(r.notInit)}}else{alert(r.getValueMultiGrid)}return A}};function d(O,G,N,K){var T=f(O).data("appendGrid");var S=[],B=null,C,L,Q=[];var D=O.getElementsByTagName("thead")[0];var I=O.getElementsByTagName("tbody")[0];var F=G,A=false;if(f.isArray(G)){F=G.length;A=true}if(f.isNumeric(K)){for(var H=0;H<T._rowOrder.length;H++){if(T._rowOrder[H]==K){N=H;if(H!=0){B=H-1}break}}}else{if(f.isNumeric(N)){if(N>=T._rowOrder.length){N=null}else{B=N-1}}else{if(T._rowOrder.length!=0){N=null;B=T._rowOrder.length-1}}}if(T._rowOrder.length==0){f("tr.empty",O).remove()}for(var H=0;H<F;H++){T._uniqueIndex++;C=T._uniqueIndex;Q.length=0;if(f.isNumeric(N)){T._rowOrder.splice(N,0,C);tbRow=I.insertRow(N);S.push(N)}else{T._rowOrder.push(C);tbRow=I.insertRow(-1);S.push(T._rowOrder.length-1)}tbRow.id=T.idPrefix+"_Row_"+C;f(tbRow).data("appendGrid",C);if(!T.hideRowNumColumn){tbCell=tbRow.insertCell(-1);f(tbCell).addClass("ui-widget-content first").text(T._rowOrder.length)}for(var J=0;J<T.columns.length;J++){if(T.columns[J].type=="hidden"){Q.push(J);continue}tbCell=tbRow.insertCell(-1);tbCell.className="ui-widget-content";if(T.columns[J].cellCss!=null){f(tbCell).css(T.columns[J].cellCss)}L=null;if(T.columns[J].type=="custom"){if(typeof(T.columns[J].customBuilder)=="function"){L=T.columns[J].customBuilder(tbCell,T.idPrefix,T.columns[J].name,C)}}else{if(T.columns[J].type=="select"){L=document.createElement("select");L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;if(f.isArray(T.columns[J].ctrlOptions)){if(T.columns[J].ctrlOptions.length>0){if(f.isPlainObject(T.columns[J].ctrlOptions[0])){for(var M=0;M<T.columns[J].ctrlOptions.length;M++){L.options[L.options.length]=new Option(T.columns[J].ctrlOptions[M].label,T.columns[J].ctrlOptions[M].value)}}else{for(var M=0;M<T.columns[J].ctrlOptions.length;M++){L.options[L.options.length]=new Option(T.columns[J].ctrlOptions[M],T.columns[J].ctrlOptions[M])}}}}else{if(f.isPlainObject(T.columns[J].ctrlOptions)){for(var M in T.columns[J].ctrlOptions){L.options[L.options.length]=new Option(T.columns[J].ctrlOptions[M],M)}}else{if(typeof(T.columns[J].ctrlOptions)=="string"){var R=T.columns[J].ctrlOptions.split(";");for(var M=0;M<R.length;M++){var U=R[M].indexOf(":");if(-1==U){L.options[L.options.length]=new Option(R[M],R[M])}else{L.options[L.options.length]=new Option(R[M].substring(U+1,R[M].length),R[M].substring(0,U))}}}}}tbCell.appendChild(L)}else{if(T.columns[J].type=="checkbox"){L=document.createElement("input");L.type="checkbox";L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;L.value=1;tbCell.appendChild(L);tbCell.style.textAlign="center"}else{if(T.columns[J].type=="textarea"){L=document.createElement("textarea");L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;tbCell.appendChild(L)}else{if(-1!=T.columns[J].type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){L=document.createElement("input");try{L.type=T.columns[J].type}catch(E){}L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;tbCell.appendChild(L)}else{L=document.createElement("input");L.type="text";L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;tbCell.appendChild(L);if(T.columns[J].type=="ui-datepicker"){f(L).datepicker(T.columns[J].uiOption)}else{if(T.columns[J].type=="ui-spinner"){f(L).spinner(T.columns[J].uiOption)}else{if(T.columns[J].type=="ui-autocomplete"){f(L).autocomplete(T.columns[J].uiOption)}}}}}}}}if(T.columns[J].type!="custom"){if(T.columns[J].ctrlAttr!=null){f(L).attr(T.columns[J].ctrlAttr)}if(T.columns[J].ctrlProp!=null){f(L).prop(T.columns[J].ctrlProp)}if(T.columns[J].ctrlCss!=null){f(L).css(T.columns[J].ctrlCss)}if(T.columns[J].ctrlClass!=null){f(L).addClass(T.columns[J].ctrlClass)}if(T.columns[J].uiTooltip){f(L).tooltip(T.columns[J].uiTooltip)}if(typeof(T.columns[J].onClick)=="function"){f(L).click({caller:O,callback:T.columns[J].onClick,uniqueIndex:C},function(V){V.data.callback(V,f(V.data.caller).appendGrid("getRowIndex",V.data.uniqueIndex))})}if(typeof(T.columns[J].onChange)=="function"){f(L).change({caller:O,callback:T.columns[J].onChange,uniqueIndex:C},function(V){V.data.callback(V,f(V.data.caller).appendGrid("getRowIndex",V.data.uniqueIndex))})}}if(A){n(T,J,C,G[H][T.columns[J].name])}else{if(!m(T.columns[J].value)){n(T,J,C,T.columns[J].value)}}}if(!T._hideLastColumn||T.columns.length>T._visibleCount){if(!T.rowButtonsInFront){tbCell=tbRow.insertCell(-1)}else{if(!T.hideRowNumColumn){tbCell=tbRow.insertCell(1)}else{tbCell=tbRow.insertCell(0)}}tbCell.className="ui-widget-content last";if(T._hideLastColumn){tbCell.style.display="none"}if(!T.hideButtons.insert){l(T.customGridButtons.insert,"ui-icon-arrowreturnthick-1-w").attr({id:T.idPrefix+"_Insert_"+C,title:T._i18n.insert,tabindex:-1}).addClass("insert",T._buttonClasses.insert).data("appendGrid",{uniqueIndex:C}).click(function(W){var V=f(this).data("appendGrid").uniqueIndex;f(O).appendGrid("insertRow",1,null,V);if(W&&W.preventDefault){W.preventDefault()}return false}).appendTo(tbCell)}if(!T.hideButtons.remove){l(T.customGridButtons.remove,"ui-icon-trash").attr({id:T.idPrefix+"_Delete_"+C,title:T._i18n.remove,tabindex:-1}).addClass("remove",T._buttonClasses.remove).data("appendGrid",{uniqueIndex:C}).click(function(W){var V=f(this).data("appendGrid").uniqueIndex;i(O,null,V,false);if(W&&W.preventDefault){W.preventDefault()}return false}).appendTo(tbCell)}if(!T.hideButtons.moveUp){l(T.customGridButtons.moveUp,"ui-icon-arrowthick-1-n").attr({id:T.idPrefix+"_MoveUp_"+C,title:T._i18n.moveUp,tabindex:-1}).addClass("moveUp",T._buttonClasses.moveUp).data("appendGrid",{uniqueIndex:C}).click(function(W){var V=f(this).data("appendGrid").uniqueIndex;f(O).appendGrid("moveUpRow",null,V);if(W&&W.preventDefault){W.preventDefault()}return false}).appendTo(tbCell)}if(!T.hideButtons.moveDown){l(T.customGridButtons.moveDown,"ui-icon-arrowthick-1-s").attr({id:T.idPrefix+"_MoveDown_"+C,title:T._i18n.moveDown,tabindex:-1}).addClass("moveDown",T._buttonClasses.moveDown).data("appendGrid",{uniqueIndex:C}).click(function(W){var V=f(this).data("appendGrid").uniqueIndex;f(O).appendGrid("moveDownRow",null,V);if(W&&W.preventDefault){W.preventDefault()}return false}).appendTo(tbCell)}if(T.rowDragging){f("<div/>").addClass("rowDrag ui-state-default ui-corner-all",T._buttonClasses.rowDrag).attr("title",T._i18n.rowDrag).append(f("<div/>").addClass("ui-icon ui-icon-carat-2-n-s").append(f("<span/>").addClass("ui-button-text").text("Drag"))).appendTo(tbCell)}for(var J=0;J<Q.length;J++){L=document.createElement("input");L.id=T.idPrefix+"_"+T.columns[Q[J]].name+"_"+C;L.name=L.id;L.type="hidden";if(A){L.value=G[H][T.columns[Q[J]].name]}else{if(!m(T.columns[Q[J]].value)){L.value=T.columns[Q[J]].value}}tbCell.appendChild(L)}if(T.customRowButtons&&T.customRowButtons.length){for(var J=T.customRowButtons.length-1;J>=0;J--){var P=T.customRowButtons[J];if(P&&P.uiButton&&P.click&&P.atTheFront){f(tbCell).prepend(w(O,P,C))}}for(var J=0;J<T.customRowButtons.length;J++){var P=T.customRowButtons[J];if(P&&P.uiButton&&P.click&&!P.atTheFront){f(tbCell).append(w(O,P,C))}}}}}b(O,T);if(f.isNumeric(N)){if(typeof(T.afterRowInserted)=="function"){T.afterRowInserted(O,B,S)}}else{if(typeof(T.afterRowAppended)=="function"){T.afterRowAppended(O,B,S)}}return{addedRows:S,parentIndex:B,rowIndex:N}}function p(A,C){var B=f("<button/>").attr({type:"button",tabindex:-1}).button(C.uiButton).click({tbWhole:A},C.click);if(C.btnClass){B.addClass(C.btnClass)}if(C.btnCss){B.css(C.btnCss)}if(C.btnAttr){B.attr(C.btnAttr)}return B}function w(B,D,A){var C=f("<button/>").val(A).attr({type:"button",tabindex:-1}).button(D.uiButton).click({tbWhole:B,uniqueIndex:A},function(E){var F=f(E.data.tbWhole).appendGrid("getRowValue",null,E.data.uniqueIndex);D.click(E,E.data.uniqueIndex,F)});if(D.btnClass){C.addClass(D.btnClass)}if(D.btnCss){C.css(D.btnCss)}if(D.btnAttr){C.attr(D.btnAttr)}return C}function i(B,H,A,E){var C=f(B).data("appendGrid");var G=B.getElementsByTagName("tbody")[0];if(f.isNumeric(A)){for(var F=0;F<C._rowOrder.length;F++){if(C._rowOrder[F]==A){H=F;break}}}if(f.isNumeric(H)){if(E||typeof(C.beforeRowRemove)!="function"||C.beforeRowRemove(B,H)){C._rowOrder.splice(H,1);G.deleteRow(H);b(B,C);s(B,H);if(typeof(C.afterRowRemoved)=="function"){C.afterRowRemoved(B,H)}}}else{if(E||typeof(C.beforeRowRemove)!="function"||C.beforeRowRemove(B,C._rowOrder.length-1)){A=C._rowOrder.pop();G.deleteRow(-1);b(B,C);if(typeof(C.afterRowRemoved)=="function"){C.afterRowRemoved(B,null)}}}if(C._rowOrder.length==0){var D=f("<td></td>").text(C._i18n.rowEmpty).attr("colspan",C._finalColSpan);f("tbody",B).append(f("<tr></tr>").addClass("empty").append(D))}}function x(A){var B=f(A).data("appendGrid");f("tbody",A).empty();B._rowOrder.length=0;B._uniqueIndex=0;b(A,B);if(B._rowOrder.length==0){var C=f("<td></td>").text(B._i18n.rowEmpty).attr("colspan",B._finalColSpan);f("tbody",A).append(f("<tr></tr>").addClass("empty").append(C))}}function s(A,D){var B=f(A).data("appendGrid");if(!B.hideRowNumColumn){for(var C=D;C<B._rowOrder.length;C++){f("#"+B.idPrefix+"_Row_"+B._rowOrder[C]+" td.first",A).text(C+1)}}}function a(G,C,F){var K,E,B,H,J;var D=f(G).data("appendGrid");if(D){K=G.getElementsByTagName("tbody")[0];f(K).empty();D._rowOrder.length=0;D._uniqueIndex=0;if(C!=null&&C.length){J=d(G,C.length,null,null);for(var A=0;A<J.addedRows.length;A++){for(var I=0;I<D.columns.length;I++){n(D,I,D._rowOrder[A],C[A][D.columns[I].name])}}}D._isDataLoaded=true;if(F){D.initData=null}f(G).data("appendGrid",D);if(typeof(D.dataLoaded)=="function"){D.dataLoaded(G)}}}function g(A,B){for(var C=0;C<B._rowOrder.length;C++){if(B._rowOrder[C]==A){return C}}return null}function m(A){return typeof(A)=="undefined"||A==null}function z(B,A){if(!m(B)&&f.isPlainObject(B)&&!m(B[A])){return B[A]}return null}function b(A,B){f(A).data("appendGrid",B);f("#"+B.idPrefix+"_rowOrder",A).val(B._rowOrder.join())}function y(B,A){var D=null;for(var C=0;C<B._rowOrder.length;C++){if(B._rowOrder[C]==A){return C}}return D}function h(D,B,F){var A={},C=null;for(var E=0;E<D.columns.length;E++){C=D.columns[E].name+(m(F)?"":"_"+F);A[C]=c(D,E,B)}return A}function c(E,C,A){var F=null,D=E.columns[C].type,B=E.columns[C].name;if(D=="checkbox"){F=u(D,E.idPrefix,B,A);if(F==null){return null}else{return F.checked?1:0}}else{if(D=="custom"){if(typeof(E.columns[C].customGetter)=="function"){return E.columns[C].customGetter(E.idPrefix,B,A)}else{return null}}else{F=u(D,E.idPrefix,B,A);if(F==null){return null}else{return F.value}}}}function u(C,D,B,A){return document.getElementById(D+"_"+B+"_"+A)}function n(E,C,A,F){var D=E.columns[C].type;var B=E.columns[C].name;if(D=="checkbox"){u(D,E.idPrefix,B,A).checked=(F!=null&&F!=0)}else{if(D=="custom"){if(typeof(E.columns[C].customSetter)=="function"){E.columns[C].customSetter(E.idPrefix,B,A,F)}}else{u(D,E.idPrefix,B,A).value=(F==null?"":F)}}}function o(B,G,A,C){var D=f(B).data("appendGrid");var F=-1;for(var E=0;E<D._rowOrder.length;E++){if(D._rowOrder[E]==A){if(G){F=C;D._rowOrder.splice(E,1);D._rowOrder.splice(C,0,A)}else{F=E;D._rowOrder.splice(C+1,0,A);D._rowOrder.splice(E,1)}break}}s(B,F);b(B,D)}function l(C,A){var B=null;if(C){if(typeof(C)=="function"){B=f(C())}else{if(C.nodeType){B=f(C).clone()}else{if(C.icons){B=f("<button/>").attr({type:"button"}).button(C)}}}}if(!B){B=f("<button/>").attr({type:"button"}).button({icons:{primary:A},text:false})}return B}f.fn.appendGrid=function(A){if(j[A]){return j[A].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof(A)==="object"||!A){return j.init.apply(this,arguments)}else{f.error(r.notSupportMethod+A)}}}})(jQuery);